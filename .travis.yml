language: python
python:
- '3.6'
install: pip install -r requirements.txt -t .
script:
- true
after_success:
- mkdir dist
- find ./ -name '*.pyc' -delete
- zip -r dist/threatstack-to-logzio.zip . -x '.git/*' -x 'dist/*'
- cp deploy/cloudformation.json dist/threatstack-to-logzio.json
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id:
    secure: tsyKJTCVnPiguMlVWSFkLFGBRQ7HAyuOf21BIv9/WkWCfv8qMlWWiNd5H1JlDqe561w/XzxX0kRqzCj0w1+apMJ9jus2vMQ2JVN23cKvyjnTfSemlwKhbScRwipL/mGaE/Qf8tidlPIWt5e5XqzlxjtT4ho6EPSzYw8y3Bt5Dh+QNYIw1tf4dhkHmUTA97xicV5YHQ728/aJ+GzjEBBTUTUaOz3U2haO2Gl+KGV9GKP26ehNCW3xoePnR7xZqHjvyO5mO3tRbA23gmPJAq4T6uyr+k140mM8VYOPnNQU19qQNdMHWc0rHlzmm3iLNA9f9KzmXUORNmMnZouD/Rr5UQudt+n9SOiWiZ4Yw/FK4u+MSKqAVxazLuTpBN8zBdMFKjjk/SJEZGUK3uCwv8b5wpQAV11E/Wx73NCI1i5B/aHk8rNBTlP1Fut/SXyn461xrk3k4BnbjZ4gRHGYT3NdV5piXFtO9LrDOGt3oCC+d2a4DDEY7tkplE+khJQO9gQx3XD0prhEKzExg3PoQLQws0JYE3ojOamzxYSlYIqCO+TUXqqLnQxiYARMm5lr66jC9pXCQho3gYqtocMDhlvh+sGvwktCfMs4x+I3raXC1nhKON/VVy8yR50fmRvxpgTcOKDx1YbGAADh6YFcDzPpLVrtE1p5Mq3s7HGSsJa2QcQ=
  secret_access_key:
    secure: fB2QcJwoZ6XFT4qfc5cgrE4ot3cAMuMeZg35nh+0+KNDbxCvZ2Vbx2kZg8dPOjzZZC3BKoqxHuHa+vgWr1ru5kLxmmx3lTuU74GSLTCP4ktGCUrSPn4zaf2Q+6wiHWKLemHGG872MJ6p5eddogaK0tjw0oq+/SH4phKLk0UZtSdnYG+iMPATdT5cw4y/nlgRb07zMk9isvqCT6SuV4EcMCaMc9e8fdMHy/K9Q009xF/3kx4mauacyIJizy+dtVM6u37fe6NCI9QARi2txzVn518b7X6wBWiEOqk7rSp/ZNFqFKLEtEhepOzi+zGNb3pfPntm/41brQ4KhMbjVIC/+STj+ocIbQIlWzRMnXtBVXUj3OPTF+G5FhEle2cMarG4nR2Eo7ZVf54vf1sQRtzEH05efLiof4LZhBAmYU9UrgHbh7XvF+MNZU8Llf61iD7rHmLGIXWIF4LhqlZy9qCEK4o844o7492CsEuTWxG3R8I+dXL/cR7L3Qg3LHPNfJ4NcYeC+2Ux6Lp1Bwej8OLsNhIqqlwYiB2g601ttby9VWg7WTgs4HsQgTvr1QCLU6tzJv/Ql9uvycMV6yAfmQjOjAi2lgLAGhuY5vyTNOBsH5YSvKCDAzAwf7eUm5wngZw5NKJXW6V1tZWKepQJlCkMOPgQuNpRI2VcXBR29XsQyNE=
  bucket: ts-demo-lamba-deploys
  local-dir: dist
  upload-dir: 'no'
  acl: public_read
  on:
    repo: threatstack/threatstack-to-logzio
